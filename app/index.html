<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Untitled</title>
    <script type="text/javascript" charset="utf-8"
            src="libs/zepto/zepto.js?1.1.6"></script>
    <script type="text/javascript" charset="utf-8"
            src="libs/zepto/fx.js?1.1.6"></script>

    <script type="text/javascript" charset="utf-8"
            src="libs/mdl/material.js?1.0.5"></script>
    <link rel="stylesheet" href="libs/mdl/material.css?1.0.5">


    <link rel="stylesheet" href="styles/base.css?2">
    <!--<script type="text/javascript" charset="utf-8"
            src="scripts/base.js?2"></script>-->
    <script type="text/javascript" charset="utf-8"
            src="scripts/base.fly.js?3"></script>

</head>
<body>
<div id="lairen-viewport">

    <div id="lairen-dialog" style="display: none;">
        <div id="dialog-mask" style="display: none;">
        </div>
    </div>

    <div id="lairen-fragments">
    </div>

</div>

<script>
    var dialog_content = '<div onclick="lairen.dialog().show()" style="border: 1px solid red; padding: 10px;">点我再打开一个 Dialog</div>'
            + '<button id="yes">Button</button>';
    var x = lairen.dialog(dialog_content, [{
        id: 'yes', callback: function () {
            console.dir(this);
            alert('Do not touch me');
        }
    }]);

    // ------------------------------------------------------------------------
    var config = {
        args: {key: 'value'},

        // 可以通过该字段来指定默认内容也可以调用 render 方法来填充内容
        html: '<div id="starter"><div style="padding: 16px 0;">Dialog & View Switcher 使用演示</div>' +

        '<button onclick="$fragment.go(\'view.about\', {key:\'value\'})">加载并呈现 About UI ->></button>' +
        '<button onclick="$fragment.go(\'view.about\', {key:\'modify\'})">加载并呈现 About UI & Args->></button>' +

        '<button onclick="alert()">系统 Dialog</button>' +

        '<button onclick="x.show()">Show dialog</button>' +
        '<button onclick="x.cancel()">Cancel dialog</button>' +
        '<button onclick="x.dismiss()">Dismiss dialog</button></div>',

        onStart: function () {
            console.log('onStart')
        },

        onResume: function () {
            console.log('onResume ' + JSON.stringify(this.getArgs()))
        }
    };
    // 定义一个 fragment
    var home = $fragment.define('view.home', config);

    // ------------------------------------------------------------------------

    $fragment.define('view.about',
            {
                title: 'about',

                // 可以通过该字段来指定默认内容也可以调用 render 方法来填充内容
                html: '<div id="starter"><div style="padding: 16px 0;">View 后退使用演示</div>' +
                '<button onclick="$fragment.back()">后退 <<-</button>' +
                '<button onclick="$fragment.go(\'login\')">加载并呈现 Login UI ->></button></div>',

                onStart: function () {
                    console.log('onStart')
                },

                onResume: function () {
                    this.getArgs()['key'];
                    console.log('onResume ' + JSON.stringify(this.getArgs()))
                }
            });

    // ------------------------------------------------------------------------

    var config_login = {
        url: 'http://192.168.3.202/pull/login',

        onReload: function() {
            // 在这里重新载入数据
            this.render( { url: 'http://192.168.3.202/pull/login' } );
        },

        onStart: function () {
            console.log('onStart')
        },

        onResume: function () {
            console.log('onResume')
        },

        // ----------------------- 上下为对应的 Callback ------------------------

        onPause: function () {

        },

        onStop: function () {
        },

        onDestroyView: function () {
        },
    };
    // 定义一个 fragment
    var login = $fragment.define('login', config_login);

    // ------------------------------------------------------------------------

    // 设置默认界面
    $fragment.beginWith('view.home');

</script>
</body>
</html>